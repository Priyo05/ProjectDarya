@model Project.Presentation.Web.Models.ReportBarangIndexViewModel


<h1>Report</h1>


<canvas id="myChart" style="width:100%;max-width:100%;height:250px"></canvas>

<form asp-action="Report" method="get">
    <div class="form-group">
        <label for="status">Filter by Status:</label>
        <select id="status" name="status" class="form-select">
            <option value="">All</option>
            <option value="Pending">Pending</option>
            <option value="Approved">Approved</option>
            <option value="Rejected">Rejected</option>
        </select>
        <button type="submit" class="btn btn-primary mt-2">Filter</button>
    </div>
</form>

<table class="table">
    <tr>
        <th>Request Id</th>
        <th>Nama Divisi</th>
        <th>Kode Barang</th>
        <th>Nama Barang</th>
        <th>Jumlah</th>
        <th>Status</th>
        <th>Tanggal Request</th>
    </tr>
    @foreach (var item in Model.ReportBarangViewModels)
    {
        <tr>
            <td>@item.Id</td>
            <td>@item.NamaDivisi</td>
            <td>@item.KodeBarang</td>
            <td>@item.NamaBarang</td>
            <td>@item.Jumlah</td>
            <td>@item.Status</td>
            <td>@item.RequestDate</td>
        </tr>
    }
</table>

@section Scripts {
    <script>
        var data = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.Data));
        var xValues = data.map(item => item.NamaBarang);
        var yValues = data.map(item => item.StokBarang);

        new Chart("myChart", {
            type: "bar",
            data: {
                labels: xValues,
                datasets: [{
                    label: 'Stock Barang',
                    backgroundColor: "blue",
                    data: yValues
                }]
            },
            options: {
                legend: { display: false },
                title: {
                    display: true,
                    text: "Nama dan Stock"
                },
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'Stock'
                        }
                    }
                }
            }
        });
    </script>


@*     <script>
        var data = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.Data));
        var xValues = data.map(item => item.NamaBarang);
        var yValues = data.map(item => item.StokBarang);

        new Chart("myChart", {
            type: "doughnut",
            data: {
                labels : xValues,
                datasets: [{
                    data: yValues,
                    backgroundColor: [
                        "blue",
                        "red",
                        "green",
                        "grey",
                        "yellow",
                        "purple"
                    ]
                }]
            }
        });

    </script> *@
}



